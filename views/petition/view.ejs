<h1 class="mt-4">Petition</h1>
<%- include ../partials/messages %>
<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header"><%= petition.title %></div>
            <div class="card-body">
                <p class="text-center"><%= petition.signaturesNeeded %> Signatures Needed</p>
                <div class="progress">
                    <% var percentage = (petition.signatures.length/petition.signaturesNeeded)*100 %>
                    <div class="progress-bar" role="progressbar" style="width:<%= percentage %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="<%= petition.signaturesNeeded %>"><%= percentage %>%</div>
                </div>
                <br />
                <p class="text-center"><%= petition.signatures.length %> <%- petition.signatures.length == 1 ? 'Signature Obtained' : 'Signatures Obtained' %></p>
                <% if(user != undefined) { %>
                    <hr>
                    <div class="list-group">
                        <div class="col d-flex justify-content-center">
                            <button id="signature" petition="<%= petition._id %>" type="button" class="btn btn-success">Sign</button>
                        </div>
                    </div>
                <% } %>
                <hr>
                <%= petition.description %>
            </div>
            <div class="card-footer">
                Created By: <%= createdBy.name %>
            </div>
        </div>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/js/petition.js"></script>
